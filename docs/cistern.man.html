<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Nicolas Bedos" />
  <title>CISTERN(1) | version 0.2.0dev0-6-g0c92981-dirty-linux-amd64</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">/*<![CDATA[*/html,body{margin:auto;padding-right:1em;padding-left:1em;max-width:44em;color:#000}body{font:14px helvetica,arial,freesans,clean,sans-serif;line-height:1.4;padding:3px;background:#fff;border-radius:3px}p{margin:1em 0}a{color:#4183c4;text-decoration:none}body{background-color:#fff;padding:30px;margin:15px;font-size:14px;line-height:1.6}body > :first-child{margin-top:0}body > :last-child{margin-bottom:0}body{box-shadow:0 0 0 1px #cacaca,0 0 0 4px #eee}h1,h2,h3,h4,h5,h6{margin:20px 0 10px;padding:0;font-weight:700;cursor:text}header > h1{font-size:24px;color:#000}h1{font-size:20px;color:#000}h2{font-size:16px;border-bottom:1px solid #ccc;color:#000}h2 code{font-size:16px}p,blockquote,table,pre{margin:15px 0}ul{padding-left:30px}ol{padding-left:30px}ol li ul:first-of-type{margin-top:0}body > h2:first-child{margin-top:0;padding-top:0}body > h1:first-child{margin-top:0;padding-top:0}body > h1:first-child + h2{margin-top:0;padding-top:0}body > h3:first-child,body > h4:first-child,body > h5:first-child,body > h6:first-child{margin-top:0;padding-top:0}a:first-child h1,a:first-child h2,a:first-child h3,a:first-child h4,a:first-child h5,a:first-child h6{margin-top:0;padding-top:0}h1 + p,h2 + p,h3 + p,h4 + p,h5 + p,h6 + p,ul li > :first-child,ol li > :first-child{margin-top:0}dl{padding:0}dl dt{font-size:14px;font-weight:700;font-style:italic;padding:0;margin:15px 0 5px}dl dt:first-child{padding:0}dl dt > :first-child{margin-top:0}dl dt > :last-child{margin-bottom:0}dl dd{margin:0 0 15px;padding:0 15px}dl dd > :first-child{margin-top:0}dl dd > :last-child{margin-bottom:0}blockquote{border-left:4px solid #DDD;padding:0 15px;color:#777}blockquote > :first-child{margin-top:0}blockquote > :last-child{margin-bottom:0}table{border-collapse:collapse;border-spacing:0;font:inherit}table th{font-weight:700;border:1px solid #ccc;padding:6px 13px}table td{border:1px solid #ccc;padding:6px 13px}table tr{border-top:1px solid #ccc;background-color:#fff}table tr:nth-child(2n){background-color:#f8f8f8}img{max-width:100%}code,tt{margin:0 2px;padding:0 5px;white-space:nowrap;border:1px solid #eaeaea;background-color:#f8f8f8;border-radius:3px;font-family:Consolas,'Liberation Mono',Courier,monospace;font-size:12px;color:#333}pre > code{margin:0;padding:0;white-space:pre;border:0;background:transparent}pre{background-color:#f8f8f8;border:1px solid #ccc;font-size:13px;line-height:19px;overflow:auto;padding:6px 10px;border-radius:3px}pre code,pre tt{background-color:transparent;border:0}sup,sub,a.footnote{font-size:1.4ex;height:0;line-height:1;vertical-align:super;position:relative}sub{vertical-align:sub;top:-1px}/*]]>*/</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">CISTERN(1) | version 0.2.0dev0-6-g0c92981-dirty-linux-amd64</h1>
<p class="author">Nicolas Bedos</p>
</header>
<h1 id="name">NAME</h1>
<p><strong>cistern</strong> – Continuous Integration Table Of Pipelines</p>
<h1 id="synopsis">SYNOPSIS</h1>
<p><code>cistern [-r REPOSITORY | --repository REPOSITORY] [COMMIT]</code></p>
<p><code>cistern -h | --help</code></p>
<p><code>cistern --version</code></p>
<h1 id="description">DESCRIPTION</h1>
<p>cistern monitors the CI pipelines associated to a specific commit of a git repository.</p>
<p>cistern currently integrates with the following online services. Each of the service is one or both of the following:</p>
<ul>
<li>A “source provider” that is used to list the pipelines associated to a given commit of an online repository</li>
<li>A “CI provider” that is used to get detailed information about CI builds</li>
</ul>
<table style="width:83%;">
<colgroup>
<col style="width: 20%" />
<col style="width: 12%" />
<col style="width: 11%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Service</th>
<th style="text-align: left;">Source</th>
<th style="text-align: left;">CI</th>
<th style="text-align: left;">URL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">GitHub</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;"><a href="https://github.com/">https://github.com/</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">GitLab</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;"><a href="https://gitlab.com/">https://gitlab.com/</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">AppVeyor</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;"><a href="https://www.appveyor.com/">https://www.appveyor.com/</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">CircleCI</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;"><a href="https://circleci.com/">https://circleci.com/</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Travis CI</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;"><a href="https://travis-ci.org/">https://travis-ci.org/</a> <a href="https://travis-ci.com/">https://travis-ci.com/</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">Azure Devops</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;"><a href="https://dev.azure.com">https://dev.azure.com</a></td>
</tr>
</tbody>
</table>
<h1 id="positional-arguments">POSITIONAL ARGUMENTS</h1>
<h2 id="commit"><code>COMMIT</code></h2>
<p>Specify the commit to monitor. COMMIT is expected to be the SHA identifier of a commit, or the name of a tag or a branch. If this option is missing cistern will monitor the commit referenced by HEAD.</p>
<p>Example:</p>
<pre class="shell"><code># Show pipelines for commit 64be3c6
cistern 64be3c6
# Show pipelines for the commit referenced by the tag &#39;0.9.0&#39;
cistern 0.9.0
# Show pipelines for the commit at the tip of a branch
cistern feature/doc</code></pre>
<h1 id="options">OPTIONS</h1>
<h2 id="rrepository---repositoryrepository"><code>-r=REPOSITORY, --repository=REPOSITORY</code></h2>
<p>Specify the git repository to monitor. If REPOSITORY is the path of a local repository, cistern will monitor all the associated remotes. If REPOSITORY is a URL, cistern will monitor the corresponding online repository.</p>
<p>If this option is not set, cistern will behave as if it had been set to the path of the current directory.</p>
<p>Note that cistern will only monitor repositories hosted on GitLab or GitHub.</p>
<p>Examples:</p>
<pre class="shell"><code># Monitor pipelines of the git repository in the current directory
cistern
# Monitor pipelines of the repository specified by a web URL
cistern -r https://gitlab.com/nbedos/cistern
cistern -r github.com/nbedos/cistern
# Git URLs are accepted
cistern -r git@github.com:nbedos/cistern.git
# A path referring to a local repository is valid too
cistern -r /home/user/repos/myrepo</code></pre>
<h2 id="h---help"><code>-h, --help</code></h2>
<p>Show usage of cistern</p>
<h2 id="version"><code>--version</code></h2>
<p>Print the version of cistern being run</p>
<h1 id="columns">COLUMNS</h1>
<h2 id="ref">REF</h2>
<p>Tag or branch associated to the pipeline</p>
<h2 id="pipeline">PIPELINE</h2>
<p>Identifier of the pipeline</p>
<h2 id="type">TYPE</h2>
<p>Either “P” (Pipeline), “S” (Stage), “J” (Job) or “T” (Task)</p>
<h2 id="state">STATE</h2>
<p>State of the pipeline</p>
<h2 id="xfail">XFAIL</h2>
<p>Expected failure. Boolean indicating whether this step is allowed to fail without impacting the overall state of the pipeline</p>
<h2 id="created-started-finished">CREATED, STARTED, FINISHED</h2>
<p>Date when the pipeline was created, started or finished</p>
<h2 id="duration">DURATION</h2>
<p>Time it took for the pipeline to finish</p>
<h2 id="name-1">NAME</h2>
<p>Name of the provider followed by the name of the pipeline, if any</p>
<h2 id="url">URL</h2>
<p>URL of the step on the website of the provider</p>
<h1 id="interactive-commands">INTERACTIVE COMMANDS</h1>
<p>Below are the default commands for interacting with cistern.</p>
<table style="width:92%;">
<colgroup>
<col style="width: 25%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Key</th>
<th style="text-align: left;">Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Up, k, Ctrl-p</td>
<td style="text-align: left;">Move cursor up by one line</td>
</tr>
<tr class="even">
<td style="text-align: left;">Down, j, Ctrl-n</td>
<td style="text-align: left;">Move cursor down by one line</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Right, l</td>
<td style="text-align: left;">Scroll right</td>
</tr>
<tr class="even">
<td style="text-align: left;">Left, h</td>
<td style="text-align: left;">Scroll left</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ctrl-u</td>
<td style="text-align: left;">Move cursor up by half a page</td>
</tr>
<tr class="even">
<td style="text-align: left;">Page Up</td>
<td style="text-align: left;">Move cursor up by one page</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ctrl-d</td>
<td style="text-align: left;">Move cursor down by half a page</td>
</tr>
<tr class="even">
<td style="text-align: left;">Page Down</td>
<td style="text-align: left;">Move cursor down by one page</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Home</td>
<td style="text-align: left;">Move cursor to the first line</td>
</tr>
<tr class="even">
<td style="text-align: left;">End</td>
<td style="text-align: left;">Move cursor to the last line</td>
</tr>
<tr class="odd">
<td style="text-align: left;">&lt;</td>
<td style="text-align: left;">Move sort column left</td>
</tr>
<tr class="even">
<td style="text-align: left;">&gt;</td>
<td style="text-align: left;">Move sort column right</td>
</tr>
<tr class="odd">
<td style="text-align: left;">!</td>
<td style="text-align: left;">Reverse sort order</td>
</tr>
<tr class="even">
<td style="text-align: left;">o, +</td>
<td style="text-align: left;">Open the fold at the cursor</td>
</tr>
<tr class="odd">
<td style="text-align: left;">O</td>
<td style="text-align: left;">Open the fold at the cursor and all sub-folds</td>
</tr>
<tr class="even">
<td style="text-align: left;">c, -</td>
<td style="text-align: left;">Close the fold at the cursor</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: left;">Close the fold at the cursor and all sub-folds</td>
</tr>
<tr class="even">
<td style="text-align: left;">/</td>
<td style="text-align: left;">Open search prompt</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Escape</td>
<td style="text-align: left;">Close search prompt</td>
</tr>
<tr class="even">
<td style="text-align: left;">Enter, n</td>
<td style="text-align: left;">Move to the next match</td>
</tr>
<tr class="odd">
<td style="text-align: left;">N</td>
<td style="text-align: left;">Move to the previous match</td>
</tr>
<tr class="even">
<td style="text-align: left;">v</td>
<td style="text-align: left;">View the log of the job at the cursor<sup>[a]</sup></td>
</tr>
<tr class="odd">
<td style="text-align: left;">b</td>
<td style="text-align: left;">Open associated web page in $BROWSER</td>
</tr>
<tr class="even">
<td style="text-align: left;">q</td>
<td style="text-align: left;">Quit</td>
</tr>
<tr class="odd">
<td style="text-align: left;">?</td>
<td style="text-align: left;">Show help for interactive commands</td>
</tr>
</tbody>
</table>
<ul>
<li><sup>[a]</sup> Note that if the job is still running, the log may be incomplete.</li>
</ul>
<h1 id="configuration-file">CONFIGURATION FILE</h1>
<h2 id="location">Location</h2>
<p>cistern follows the XDG base directory specification [2] and expects to find the configuration file at one of the following locations depending on the value of the two environment variables <code>XDG_CONFIG_HOME</code> and <code>XDG_CONFIG_DIRS</code>:</p>
<ol type="1">
<li><code>"$XDG_CONFIG_HOME/cistern/cistern.toml"</code></li>
<li><code>"$DIR/cistern/cistern.toml"</code> for every directory <code>DIR</code> in the comma-separated list <code>"$XDG_CONFIG_DIRS"</code></li>
</ol>
<p>If <code>XDG_CONFIG_HOME</code> (resp. <code>XDG_CONFIG_DIRS</code>) is not set, cistern uses the default value <code>"$HOME/.config"</code> (resp. <code>"/etc/xdg"</code>) instead.</p>
<h2 id="format">Format</h2>
<p>cistern uses a configuration file in <a href="https://github.com/toml-lang/toml/blob/master/versions/en/toml-v0.5.0.md">TOML version v0.5.0</a> format.</p>
<p>The complete format of the configuration file is described in the example included in the release archives which is also available <a href="https://github.com/nbedos/cistern/blob/master/cmd/cistern/cistern.toml">on GitHub</a></p>
<h2 id="minimal-example">Minimal example</h2>
<p>This is a minimal example of a configuration file focused mostly on setting up credentials. It should be enough to get you started running cistern.</p>
<pre class="toml"><code>#### CISTERN CONFIGURATION FILE ####
# This is a configuration file for cistern that should be located at
# $XDG_CONFIG_HOME/cistern/cistern.toml

## GENERIC OPTIONS ##
# List of columns displayed on screen. Available columns are 
# &quot;ref&quot;, &quot;pipeline&quot;, &quot;type&quot;, &quot;state&quot;, &quot;created&quot;, &quot;started&quot;,
# &quot;finished&quot;, &quot;duration&quot;, &quot;xfail&quot;, &quot;name&quot;, &quot;url&quot;
columns = [&quot;ref&quot;, &quot;pipeline&quot;, &quot;type&quot;, &quot;state&quot;, &quot;started&quot;, &quot;duration&quot;, &quot;name&quot;, &quot;url&quot;]

# Name of the column used for sorting the table prefixed by an
# optional &quot;+&quot; (ascending order) or &quot;-&quot; (descending order).
sort = &quot;-started&quot;


## PROVIDERS ##
[providers]
# The sections below define credentials for accessing source 
# providers (GitHub, GitLab) and CI providers (GitLab, Travis,
# AppVeyor, Azure Devops, CircleCI).
#
# Feel free to remove any section as long as you leave one
# section for a source provider and one for a CI provider.
# 
# When an API token is not set or set to the empty string,
# cistern will still run but with some limitations:
#     - GitHub: cistern will hit the rate-limit for
#     unauthenticated requests in a few minutes
#     - GitLab: cistern will NOT be able to access pipeline
#     jobs
#

### GITHUB ###
[[providers.github]]
# GitHub API token (optional, string)
# GitHub token management: https://github.com/settings/tokens
token = &quot;&quot;


### GITLAB ###
[[providers.gitlab]]
# GitLab instance URL (optional, string, default:
# &quot;https://gitlab.com&quot;)
# (the GitLab instance must support GitLab REST API V4)
url = &quot;https://gitlab.com&quot;

# GitLab API token (optional, string)
# gitlab.com token management:
#     https://gitlab.com/profile/personal_access_tokens
token = &quot;&quot;


### TRAVIS CI ###
[[providers.travis]]
# URL of the Travis instance. &quot;org&quot; and &quot;com&quot; can be used as
# shorthands for the full URL of travis.org and travis.com
# (string, mandatory)
url = &quot;org&quot;

# API access token for the travis API (string, optional).
# Travis tokens are managed at:
#    - https://travis-ci.org/account/preferences
#    - https://travis-ci.com/account/preferences
token = &quot;&quot;


# Define another account for accessing travis.com
[[providers.travis]]
url = &quot;com&quot;
token = &quot;&quot;


### APPVEYOR ###
[[providers.appveyor]]
# AppVeyor API token (optional, string)
# AppVeyor token managemement: https://ci.appveyor.com/api-keys
token = &quot;&quot;


### CIRCLECI ###
[[providers.circleci]]
# Circle CI API token (optional, string)
# See https://circleci.com/account/api
token = &quot;&quot;


### AZURE DEVOPS ###
[[providers.azure]]
# Azure API token (optional, string)
# Azure token management is done at https://dev.azure.com/ via
# the user settings menu
token = &quot;&quot;
</code></pre>
<h1 id="environment">ENVIRONMENT</h1>
<h2 id="environment-variables">ENVIRONMENT VARIABLES</h2>
<ul>
<li><code>BROWSER</code> is used to find the path of the default web browser</li>
<li><code>PAGER</code> is used to view log files. If the variable is not set, cistern will call <code>less</code></li>
<li><code>HOME</code>, <code>XDG_CONFIG_HOME</code> and <code>XDG_CONFIG_DIRS</code> are used to locate the configuration file</li>
</ul>
<h2 id="local-programs">LOCAL PROGRAMS</h2>
<p>cistern relies on the following local executables:</p>
<ul>
<li><code>less</code> to view log files, unless <code>PAGER</code> is set</li>
<li><code>git</code> (optional) to translate the abbreviated SHA identifier of a commit into a non-abbreviated SHA and also to support ‘insteadOf’ and ‘pushInsteadOf’ configuration options for remote URLs</li>
</ul>
<h1 id="examples">EXAMPLES</h1>
<p>Monitor pipelines of the current git repository</p>
<pre class="shell"><code># Move to a directory containing a git repository of your choosing
git clone git@github.com:nbedos/cistern.git &amp;&amp; cd cistern
# Run cistern to list the pipelines associated to the last commit of the repository 
cistern

# Show pipelines associated to a specific commit, tag or branch
cistern a24840c
cistern 0.1.0
cistern master</code></pre>
<p>Monitor pipelines of other repositories</p>
<pre class="shell"><code># Show pipelines of a repository identified by a URL or path
cistern -r https://gitlab.com/nbedos/cistern        # Web URL
cistern -r git@github.com:nbedos/cistern.git        # Git URL
cistern -r github.com/nbedos/cistern                # URL without scheme
cistern -r /home/user/repos/repo                    # Path to a repository

# Specify both repository and git reference
cistern -r github.com/nbedos/cistern master</code></pre>
<h1 id="bugs">BUGS</h1>
<p>Questions, bug reports and feature requests are welcome and should be submitted on <a href="https://github.com/nbedos/cistern/issues">GitHub</a>.</p>
<h1 id="notes">NOTES</h1>
<ol type="1">
<li><strong>cistern repository</strong>
<ul>
<li><a href="https://github.com/nbedos/cistern">https://github.com/nbedos/cistern</a></li>
</ul></li>
<li><strong>XDG base directory specification</strong>
<ul>
<li><a href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html">https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html</a></li>
</ul></li>
</ol>
</body>
</html>
